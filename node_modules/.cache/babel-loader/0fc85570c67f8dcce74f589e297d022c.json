{"ast":null,"code":"import axios from \"axios\";\nlet ADD_USERS = 'ADD_USERS';\nlet SET_USERS = 'SET_USERS';\nconst initialState = {\n  users: [{\n    id: 1,\n    login: 'gerg',\n    p\n  }]\n};\nexport const reducerHeader = (state = initialState, action) => {\n  switch (action.type) {\n    case ADD_USERS:\n      {\n        let login = state.users.map(login => login.login);\n\n        for (let i = 0; i < login.length; i++) {\n          if (action.login === login[i]) {\n            return state;\n          }\n        }\n\n        if (action.pass.length < 6) {\n          return state;\n        }\n\n        let newUsers = {\n          _id: 3,\n          login: action.login,\n          pass: action.pass,\n          isAuth: false\n        };\n        return { ...state,\n          users: [...state.users, newUsers]\n        };\n      }\n\n    case SET_USERS:\n      {\n        return { ...state,\n          users: [...state.users, action.usersServ]\n        };\n      }\n\n    default:\n      return state;\n  }\n};\nexport const addUsers = (login, pass) => ({\n  type: ADD_USERS,\n  login,\n  pass\n});\nexport const setUsers = usersServ => ({\n  type: SET_USERS,\n  usersServ\n});\nexport const getUsersThunk = () => {\n  return dispatch => {\n    axios.get('http://localhost:4000/api/users').then(user => {\n      let users = user.data;\n\n      for (let i = 0; i < users.length; i++) {\n        dispatch(setUsers(users[i]));\n      }\n    });\n  };\n};\nexport const setUsersThunk = text => {\n  return dispatch => {\n    let users = {\n      login: text.login,\n      pass: text.pass,\n      isAuth: false\n    };\n    axios.post('http://localhost:4000/api/users', users);\n  };\n};","map":{"version":3,"sources":["/Users/ivannazarov/Documents/reactApp/ServerAndMessage/message/src/components/Header/reducerHeader.js"],"names":["axios","ADD_USERS","SET_USERS","initialState","users","id","login","p","reducerHeader","state","action","type","map","i","length","pass","newUsers","_id","isAuth","usersServ","addUsers","setUsers","getUsersThunk","dispatch","get","then","user","data","setUsersThunk","text","post"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAIC,SAAS,GAAG,WAAhB;AACA,IAAIC,SAAS,GAAG,WAAhB;AAEA,MAAMC,YAAY,GAAG;AACjBC,EAAAA,KAAK,EAAC,CACN;AAACC,IAAAA,EAAE,EAAE,CAAL;AAAQC,IAAAA,KAAK,EAAE,MAAf;AAAuBC,IAAAA;AAAvB,GADM;AADW,CAArB;AAQA,OAAO,MAAMC,aAAa,GAAG,CAACC,KAAK,GAAGN,YAAT,EAAuBO,MAAvB,KAAkC;AAE3D,UAAQA,MAAM,CAACC,IAAf;AACI,SAAKV,SAAL;AAAgB;AAEZ,YAAIK,KAAK,GAAGG,KAAK,CAACL,KAAN,CAAYQ,GAAZ,CAAgBN,KAAK,IAAEA,KAAK,CAACA,KAA7B,CAAZ;;AAEA,aAAK,IAAIO,CAAC,GAAC,CAAX,EAAcA,CAAC,GAACP,KAAK,CAACQ,MAAtB,EAA8BD,CAAC,EAA/B,EAAkC;AAE9B,cAAGH,MAAM,CAACJ,KAAP,KAAeA,KAAK,CAACO,CAAD,CAAvB,EAA2B;AAEvB,mBAAOJ,KAAP;AACH;AACJ;;AAED,YAAIC,MAAM,CAACK,IAAP,CAAYD,MAAZ,GAAmB,CAAvB,EAA0B;AACtB,iBAAOL,KAAP;AACH;;AAGD,YAAIO,QAAQ,GAAC;AACTC,UAAAA,GAAG,EAAE,CADI;AAETX,UAAAA,KAAK,EAAEI,MAAM,CAACJ,KAFL;AAGTS,UAAAA,IAAI,EAAEL,MAAM,CAACK,IAHJ;AAITG,UAAAA,MAAM,EAAE;AAJC,SAAb;AAQA,eAAO,EAAC,GAAGT,KAAJ;AAAWL,UAAAA,KAAK,EAAE,CAAC,GAAGK,KAAK,CAACL,KAAV,EAAiBY,QAAjB;AAAlB,SAAP;AACH;;AAED,SAAKd,SAAL;AAAe;AACX,eAAO,EAAC,GAAGO,KAAJ;AAAWL,UAAAA,KAAK,EAAE,CAAC,GAAGK,KAAK,CAACL,KAAV,EAAiBM,MAAM,CAACS,SAAxB;AAAlB,SAAP;AACH;;AAED;AACI,aAAOV,KAAP;AAlCR;AAoCH,CAtCM;AAwCP,OAAO,MAAMW,QAAQ,GAAG,CAACd,KAAD,EAASS,IAAT,MAAkB;AAACJ,EAAAA,IAAI,EAAEV,SAAP;AAAkBK,EAAAA,KAAlB;AAAyBS,EAAAA;AAAzB,CAAlB,CAAjB;AACP,OAAO,MAAMM,QAAQ,GAAIF,SAAD,KAAe;AAACR,EAAAA,IAAI,EAAET,SAAP;AAAmBiB,EAAAA;AAAnB,CAAf,CAAjB;AAEP,OAAO,MAAMG,aAAa,GAAC,MAAI;AAC3B,SAAQC,QAAD,IAAY;AACfvB,IAAAA,KAAK,CAACwB,GAAN,CAAU,iCAAV,EAA6CC,IAA7C,CAAkDC,IAAI,IAAE;AACpD,UAAItB,KAAK,GAAGsB,IAAI,CAACC,IAAjB;;AACA,WAAI,IAAId,CAAC,GAAC,CAAV,EAAaA,CAAC,GAACT,KAAK,CAACU,MAArB,EAA4BD,CAAC,EAA7B,EAAgC;AAE5BU,QAAAA,QAAQ,CAACF,QAAQ,CAACjB,KAAK,CAACS,CAAD,CAAN,CAAT,CAAR;AACH;AAEJ,KAPD;AAQH,GATD;AAUH,CAXM;AAaP,OAAO,MAAMe,aAAa,GAAGC,IAAD,IAAQ;AAChC,SAAON,QAAD,IAAY;AACd,QAAInB,KAAK,GAAG;AAACE,MAAAA,KAAK,EAAEuB,IAAI,CAACvB,KAAb;AAAoBS,MAAAA,IAAI,EAAEc,IAAI,CAACd,IAA/B;AAAqCG,MAAAA,MAAM,EAAE;AAA7C,KAAZ;AACAlB,IAAAA,KAAK,CAAC8B,IAAN,CAAW,iCAAX,EAA8C1B,KAA9C;AACH,GAHD;AAIH,CALM","sourcesContent":["import axios from \"axios\"\n\nlet ADD_USERS = 'ADD_USERS'\nlet SET_USERS = 'SET_USERS'\n\nconst initialState = {\n    users:[\n    {id: 1, login: 'gerg', p}\n    \n    ]\n}\n\n\nexport const reducerHeader = (state = initialState, action) => {\n    \n    switch (action.type){\n        case ADD_USERS: {\n\n            let login = state.users.map(login=>login.login)\n            \n            for (let i=0; i<login.length; i++){\n                \n                if(action.login===login[i]){\n                    \n                    return state\n                }\n            }\n\n            if (action.pass.length<6) {\n                return state\n            }\n            \n\n            let newUsers={\n                _id: 3,\n                login: action.login,\n                pass: action.pass,\n                isAuth: false\n                \n            }\n\n            return {...state, users: [...state.users, newUsers]}\n        }\n\n        case SET_USERS:{\n            return {...state, users: [...state.users, action.usersServ]}\n        }\n\n        default:\n            return state\n    }\n}\n\nexport const addUsers = (login , pass) =>({type: ADD_USERS, login, pass })\nexport const setUsers = (usersServ)=> ({type: SET_USERS , usersServ})\n\nexport const getUsersThunk=()=>{\n    return (dispatch)=>{\n        axios.get('http://localhost:4000/api/users').then(user=>{\n            let users = user.data\n            for(let i=0; i<users.length;i++){\n                \n                dispatch(setUsers(users[i]))\n            }\n            \n        })\n    }\n}\n\nexport const setUsersThunk =(text)=>{\n    return(dispatch)=>{\n        let users = {login: text.login, pass: text.pass, isAuth: false}\n        axios.post('http://localhost:4000/api/users', users)\n    }\n}\n"]},"metadata":{},"sourceType":"module"}