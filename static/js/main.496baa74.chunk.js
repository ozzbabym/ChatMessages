(this.webpackJsonpmessage=this.webpackJsonpmessage||[]).push([[0],{112:function(e,t,s){e.exports={chat:"Users_chat__1X262"}},119:function(e,t,s){},16:function(e,t,s){e.exports={header:"Header_header__1VCKf",form:"Header_form__1yuui",button:"Header_button__3kSo_",link:"Header_link__2wI74"}},243:function(e,t,s){"use strict";s.r(t);var n=s(1),a=s(0),c=s.n(a),r=s(51),i=s.n(r),o=(s(119),s(22)),u=s(23),d=s(27),j=s(26),l=s(15),h=s(8),b=s(29),p=s.n(b),m=s(30),O=s(9),g="ADD_FROM_SERVER",f="ADD_MESSAGE",x="SET_MESSAGE",v="DEL_MESSAGE",_={message:[]},y=s(245),k=s(244),S=Object(k.a)({form:"message"})((function(e){return Object(n.jsx)("form",{onSubmit:e.handleSubmit,children:Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:Object(n.jsx)(y.a,{placeholder:"Enter your message",className:p.a.input,name:"messageText",component:"input"})}),Object(n.jsx)("span",{children:Object(n.jsx)("button",{className:p.a.button,children:"SEND"})})]})})})),N=s(112),w=s.n(N),M=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"render",value:function(){var e=this.props.users.users.map((function(e){return Object(n.jsx)("div",{children:e.login},e._id)}));return Object(n.jsxs)("div",{children:["Users:",Object(n.jsx)("div",{className:w.a.chat,children:e})]})}}]),s}(c.a.Component),E=Object(l.b)((function(e){return{users:e.reducerHeader}}),{})(M),T=s(54),C=s.n(T),D=s(76),U=s.n(D),A=s(25),R=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"click",value:function(e){this.props.delMess(this.props.location.pathname)}},{key:"render",value:function(){var e=this;return U()(document).ready((function(){U()("div").scrollTop(1e20)})),Object(n.jsx)("div",{id:"chat",children:Object(n.jsx)("div",{className:C.a.chat,children:this.props.messageName.map((function(t){return Object(n.jsx)(A.b,{to:"/"+t._id,className:C.a.navlink,children:Object(n.jsxs)("div",{children:[Object(n.jsx)("span",{children:t.name+": "}),Object(n.jsx)("span",{children:t.message}),Object(n.jsx)("div",{className:C.a.del,onClick:e.click.bind(e),children:"x"})]},t.id)})}))})})}}]),s}(c.a.PureComponent),B=Object(h.e)(R),H=s(33),P=s.n(H),F=s(7),L=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){return Object(o.a)(this,s),t.apply(this,arguments)}return Object(u.a)(s,[{key:"componentDidMount",value:function(){var e=this;P.a.get("https://chatmessages.herokuapp.com/api/messages").then((function(t){for(var s=t.data,n=0;n<s.length;n++)e.props.setMessages(s[n])}))}},{key:"message",value:function(e){var t={name:this.props.user,message:e.messageText};P.a.post("https://chatmessages.herokuapp.com/api/messages",t),this.props.addMessage(e.messageText,this.props.user),e.messageText="https://chatmessages.herokuapp.com/api/messages"}},{key:"delMessage",value:function(e){P.a.delete("https://chatmessages.herokuapp.com/api/messages"+e,{data:{id:""}})}},{key:"render",value:function(){return Object(n.jsxs)("div",{className:p.a.body,children:[Object(n.jsx)("div",{className:p.a.chat,children:Object(n.jsx)(B,{messageName:this.props.message,delMess:this.delMessage.bind(this)})}),Object(n.jsx)("div",{className:p.a.people,children:Object(n.jsx)(E,{})}),Object(n.jsx)("div",{className:p.a.mess,children:Object(n.jsx)(S,{onSubmit:this.message.bind(this)})})]})}}]),s}(c.a.PureComponent),V=Object(F.d)(h.e,Object(l.b)((function(e){return{message:e.MessageReducer.message,user:e.reducerStateName.name}}),{addMessage:function(e,t){return{type:f,newText:e,name:t}},setMessages:function(e){return{type:x,newMessage:e}},delMessages:function(e){return{type:v,delMessage:e}}}))(L),G=s(16),I=s.n(G),J=Object(k.a)({form:"header"})((function(e){return Object(n.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:I.a.form,children:Object(n.jsx)(y.a,{placeholder:"login",name:"login",component:"input"})}),Object(n.jsx)("div",{className:I.a.form,children:Object(n.jsx)(y.a,{placeholder:"password",name:"pass",component:"input",type:"password"})})]}),Object(n.jsx)("span",{children:Object(n.jsx)("button",{className:I.a.button,children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})})]})})),Q="ADD_USERS",X="SET_USERS",q={users:[]},z=function(e){return{type:X,usersServ:e}},K=Object(k.a)({form:"header"})((function(e){return Object(n.jsxs)("form",{onSubmit:e.handleSubmit,children:[Object(n.jsxs)("div",{children:[Object(n.jsx)("div",{className:I.a.form,children:Object(n.jsx)(y.a,{placeholder:"login",name:"login",component:"input"})}),Object(n.jsx)("div",{className:I.a.form,children:Object(n.jsx)(y.a,{placeholder:"password",name:"pass",component:"input",type:"password"})})]}),Object(n.jsx)("span",{children:Object(n.jsx)("button",{className:I.a.button,children:"\u0412\u0445\u043e\u0434"})})]})})),W="NAME",Y={name:"Unknow"},Z=function(e){Object(d.a)(s,e);var t=Object(j.a)(s);function s(){var e;Object(o.a)(this,s);for(var n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={login:""},e.Exit=function(){e.setState({login:""})},e}return Object(u.a)(s,[{key:"componentDidMount",value:function(){this.props.getUsersThunk()}},{key:"submitRegistr",value:function(e){this.props.setUsersThunk(e)}},{key:"submitSigin",value:function(e){for(var t=this.props.users.map((function(e){return e.login})),s=this.props.users.map((function(e){return e.pass})),n=0;n<t.length;n++)e.login===t[n]&&e.pass===s[n]&&(this.setState({login:e.login}),this.props.Name(e.login))}},{key:"render",value:function(){var e=this;return Object(n.jsxs)("div",{className:I.a.header,children:[Object(n.jsxs)("h1",{children:["Welcom to chat ",this.state.login]}),!this.state.login&&Object(n.jsxs)("div",{children:[Object(n.jsx)(A.b,{to:"/reg",className:I.a.link,children:"Register"}),Object(n.jsx)("span",{children:" "}),Object(n.jsx)(A.b,{to:"/sigin",className:I.a.link,children:"Sigin"}),Object(n.jsx)(h.a,{exact:!0,path:"/reg",render:function(){return Object(n.jsx)(J,{onSubmit:e.submitRegistr.bind(e)})}}),Object(n.jsx)(h.a,{exact:!0,path:"/sigin",render:function(){return Object(n.jsx)(K,{onSubmit:e.submitSigin.bind(e)})}})]}),this.state.login&&Object(n.jsx)("div",{children:Object(n.jsx)("button",{onClick:this.Exit,children:"Exit"})})]})}}]),s}(c.a.PureComponent),$=Object(F.d)(h.e,Object(l.b)((function(e){return{users:e.reducerHeader.users}}),{addUsers:function(e,t){return{type:Q,login:e,pass:t}},Name:function(e){return{type:W,name:e}},setUsers:z,getUsersThunk:function(){return function(e){P.a.get("https://chatmessages.herokuapp.com/api/users").then((function(t){for(var s=t.data,n=0;n<s.length;n++)e(z(s[n]))}))}},setUsersThunk:function(e){return function(t){var s={login:e.login,pass:e.pass,isAuth:!1};P.a.post("https://chatmessages.herokuapp.com/api/users",s)}}}))(Z);var ee=function(){return Object(n.jsxs)("div",{children:[Object(n.jsx)($,{}),Object(n.jsx)(V,{})]})},te=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,247)).then((function(t){var s=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,r=t.getTTFB;s(e),n(e),a(e),c(e),r(e)}))},se=s(246),ne=s(113),ae=Object(F.c)({MessageReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:var s={id:3,name:t.name,message:t.newText};return Object(O.a)(Object(O.a)({},e),{},{message:[].concat(Object(m.a)(e.message),[s])});case x:return Object(O.a)(Object(O.a)({},e),{},{message:[].concat(Object(m.a)(e.message),[t.newMessage])});case g:case v:return Object(O.a)(Object(O.a)({},e),{},{message:Object(m.a)(e.message)});default:return e}},reducerHeader:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:for(var s=e.users.map((function(e){return e.login})),n=0;n<s.length;n++)if(t.login===s[n])return e;if(t.pass.length<6)return e;var a={_id:3,login:t.login,pass:t.pass,isAuth:!1};return Object(O.a)(Object(O.a)({},e),{},{users:[].concat(Object(m.a)(e.users),[a])});case X:return Object(O.a)(Object(O.a)({},e),{},{users:[].concat(Object(m.a)(e.users),[t.usersServ])});default:return e}},reducerStateName:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return Object(O.a)(Object(O.a)({},e),{},{name:t.name});default:return e}},form:se.a}),ce=Object(F.e)(ae,Object(F.a)(ne.a));i.a.render(Object(n.jsx)(A.a,{children:Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(l.a,{store:ce,children:Object(n.jsx)(ee,{})})})}),document.getElementById("root")),te()},29:function(e,t,s){e.exports={body:"Body_body__7Uf9z",chat:"Body_chat__10QVh",people:"Body_people__3g_1N",mess:"Body_mess__3ebwQ",input:"Body_input__28ubP",button:"Body_button__fsVq7"}},54:function(e,t,s){e.exports={chat:"windowChat_chat__22Syl",del:"windowChat_del__3gdXu",show:"windowChat_show__-otDD",navlink:"windowChat_navlink__21kL9"}}},[[243,1,2]]]);
//# sourceMappingURL=main.496baa74.chunk.js.map